<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self';
                 img-src * data: blob:;
                 style-src 'self' 'unsafe-inline';
                 script-src 'self' https://cdn.tailwindcss.com;
                 frame-src *;
                 connect-src *;">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mini Browser</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { glass: "rgba(24,24,28,0.6)" },
          boxShadow: { glow: "0 0 0 1px rgba(255,255,255,.06), 0 12px 40px rgba(0,0,0,.45)" },
          backdropBlur: { xs: "2px" }
        }
      }
    }
  </script>
  <style>
    /* Make the custom titlebar draggable */
    .app-drag { -webkit-app-region: drag; }
    /* Buttons/inputs must be non-draggable so clicks work */
    .no-drag { -webkit-app-region: no-drag; }
  </style>
</head>
<body class="h-screen w-screen m-0 bg-neutral-950/90 text-neutral-100 flex flex-col">
  <!-- Glassy custom titlebar -->
  <div id="titlebar"
       class="app-drag sticky top-0 z-50 flex items-center justify-between
              px-3 py-2 bg-glass backdrop-blur-md shadow-glow border-b border-white/5">
    <!-- Mac-style traffic lights (custom) -->
    <div class="flex items-center gap-2 pl-1">
      <button id="win-close"
              class="no-drag h-3.5 w-3.5 rounded-full"
              style="background:#ff5f57"></button>
      <button id="win-min"
              class="no-drag h-3.5 w-3.5 rounded-full"
              style="background:#ffbd2e"></button>
      <button id="win-max"
              class="no-drag h-3.5 w-3.5 rounded-full"
              style="background:#28c840"></button>
      <div class="ml-3 text-sm font-medium text-neutral-200 select-none">Mini Browser</div>
    </div>

    <!-- Command cluster -->
    <div class="no-drag flex items-center gap-2">
      <button id="back" class="px-3 py-1.5 rounded-lg bg-neutral-800/70 hover:bg-neutral-700/70">←</button>
      <button id="forward" class="px-3 py-1.5 rounded-lg bg-neutral-800/70 hover:bg-neutral-700/70">→</button>
      <button id="reload" class="px-3 py-1.5 rounded-lg bg-neutral-800/70 hover:bg-neutral-700/70">⟳</button>
      <input id="url"
             class="w-[44vw] md:w-[52vw] lg:w-[58vw] px-3 py-1.5 rounded-lg bg-neutral-950/70 border border-white/10 focus:outline-none focus:ring-2 focus:ring-indigo-500"
             type="text" spellcheck="false" placeholder="Search or enter address" />
      <button id="newTab" class="px-3 py-1.5 rounded-lg bg-black hover:bg-neutral-950 border-[1px] border-white/20">＋</button>
    </div>
  </div>

  <!-- Tabs strip -->
  <div class="no-drag bg-neutral-900/60 border-b border-white/5">
    <div id="tabs" class="flex gap-2 px-2 py-2 overflow-x-auto"></div>
  </div>

  <!-- Views area fills remaining space -->
  <div id="views" class="relative flex-1 bg-black"></div>

  <script src="./renderer.js"></script>
  <script>
    // Window control wiring
    const q = (s)=>document.querySelector(s);
    q('#win-close').addEventListener('click', ()=>window.appWindow.close());
    q('#win-min').addEventListener('click', ()=>window.appWindow.minimize());
    q('#win-max').addEventListener('click', ()=>window.appWindow.maximizeToggle());
    // mac-like dblclick to zoom/unzoom
    document.getElementById('titlebar').addEventListener('dblclick', ()=>window.appWindow.maximizeToggle());
  </script>
</body>
</html>
